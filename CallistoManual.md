# Callisto

Callisto is a memory and data storage module for **Jupiter**, an offline AI home companion. It is designed to handle user data and conversation logs efficiently, ensuring flexibility and ease of integration with the larger Jupiter architecture.

## Overview

Callisto is a self-contained module that focuses exclusively on data storage and retrieval. It is part of the modular architecture of Jupiter, where each module is named after a Jovian moon and serves a specific purpose. Callisto is designed to be simple, complete, and easy to integrate, while also being fully testable as a standalone component.

## Features

1. **User Data Storage**:
   - Stores user data as individual JSON files in the `data/users/` directory.
   - Allows flexibility to add, adjust or remove categories (e.g., `likes`).
   - Supports amending, appending, and adjusting data within a category.
   - This data comes from Jupiter, which decides what to store.

2. **User Management**:
   - Stores users under a unique User ID (UUID).
   - Provides functionality to merge two UUIDs, transferring all data to the newer UUID and deleting the older one.
   - UUID's are generated by Jupiter and will be passed to Callisto.

3. **Conversation Logs**:
   - Stores conversation logs as `.txt` files in the `data/logs/{uuid}/` directory.
   - Logs include date stamps for each line of the conversation.
   - If two UUID's are merged, the old conversation logs are moved to the new folder.

4. **Data Retrieval**:
   - Returns complete user data as JSON objects when requested.
   - Returns complete conversation logs as plain text when requested.

5. **Data Pruning and Modification**:
   - Allows pruning, amending, or deleting conversation logs or user information when requested.

## Design Principles

- **Modularity**: Callisto is designed to be as self-contained as possible, focusing solely on its responsibilities. Other aspects of the system are handled by Jupiter.
- **Simplicity**: The code is kept simple and concise, avoiding unnecessary abstraction.
- **Flexibility**: The module is built to handle dynamic changes in user data and conversation logs.
- **Offline-First**: Callisto operates entirely offline, aligning with Jupiter's offline-first design philosophy.

## Integration with Jupiter

Callisto is one of many modules that make up Jupiter. It connects harmoniously with the overall architecture, ensuring seamless data storage and retrieval. While it is designed to be part of Jupiter, it can also be used and tested as a standalone component. 
To achieve this, Callisto is entirely self-contained and self-reliant, with function calls made by Jupiter/other modules the only way for them to interact with Callisto.

## Limitations

- Callisto does not extract information from conversation logs or handle conversations. These tasks are managed by Jupiter.
- Internet connectivity is not required for Callisto's core functionality.

## Usage

Callisto provides the following core functionalities:
- Storing and managing user data as JSON files.
- Storing and managing conversation logs as `.txt` files.
- Retrieving user data and conversation logs.
- Pruning, amending, or deleting conversation logs and user data.
- Merging user information and shifting conversations to new folders
- Storing multi-user conversations in both users directory. Jupiter may pass a conversation log that contains multiple users - this log should be copied into each of their folders.

## Testing

Callisto is fully testable as a standalone module. Via function calls, a user can give Callisto user info/conversation logs for storage, and manipulate them in line with Callisto's use.

## Notes

- Ensure that Callisto is only responsible for data storage and retrieval. Avoid adding functionality outside its scope.
- Follow the modular design principles to maintain compatibility with Jupiter's architecture.
- User data is stored in `data/users/` as JSON files, and conversation logs are stored in `data/logs/{uuid}/` as `.txt` files.

## Example user json
```
{
  "uuid": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "created": "2025-03-15",
  "last_modified": "2025-04-07",
  "profile": {
    "name": {
      "value": "Alex",
      "date_added": "2025-03-15"
    },
    "preferred_name": {
      "value": "Alex", 
      "date_added": "2025-03-15"
    },
    "pronouns": {
      "value": "they/them",
      "date_added": "2025-03-15"
    },
    "birthday": {
      "value": "1988-06-22",
      "date_added": "2025-03-16"
    },
    "last_modified": "2025-03-16"
  },
  "preferences": {
    "theme": {
      "value": "dark",
      "date_added": "2025-03-20"
    },
    "notification_level": {
      "value": "minimal",
      "date_added": "2025-04-02"
    },
    "last_modified": "2025-04-02"
  },
  "likes": [
    {
      "value": "science fiction books",
      "date_added": "2025-03-16"
    },
    {
      "value": "classical music",
      "date_added": "2025-03-22"
    },
    {
      "value": "hiking",
      "date_added": "2025-04-01"
    },
    {
      "value": "python programming",
      "date_added": "2025-04-05"
    }
  ],
  "dislikes": [
    {
      "value": "loud noises",
      "date_added": "2025-03-18"
    },
    {
      "value": "corporate meetings",
      "date_added": "2025-04-03"
    }
  ],
  "conversation_metadata": {
    "total_conversations": 42,
    "last_conversation": "2025-04-07",
    "recent_topics": [
      {
        "topic": "home automation project",
        "date_discussed": "2025-04-07"
      },
      {
        "topic": "vacation planning",
        "date_discussed": "2025-04-05"
      },
      {
        "topic": "recipe recommendations",
        "date_discussed": "2025-04-01"
      }
    ]
  },
  "relationships": {
    "family": [
      {
        "name": "Jordan", 
        "relation": "spouse", 
        "uuid": "f9e8d7c6-b5a4-3210-fedc-ba9876543210",
        "date_added": "2025-03-15"
      },
      {
        "name": "Riley", 
        "relation": "child",
        "date_added": "2025-03-15"
      }
    ]
  }
}
```